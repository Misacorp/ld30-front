function Server(){return this.user={},this.game={},this.hexes={},this.connections={},this.startHex={},this.teams={},this}dpd.on("hex:create",function(e){}),dpd.on("hex:update",function(e){}),dpd.on("game:start",function(e){location.reload()}),Server.prototype={constructor:Server,init:function(){var e=this;dpd.games.get({$sort:{startTime:-1},$limit:1},function(t,n){return n?console.log(n):void(e.game=t[0])}),dpd.hexes.get(function(t){e.hexes=t}),dpd.connections.get(function(t){e.connections=t}),dpd.teams.get(function(t){e.teams=t})},getHexesInWindow:function(e,t,n,o){var s={$and:[{q:{$gte:e}},{q:{$lte:n}},{r:{$gte:t}},{r:{$lte:n}}]};dpd.hexes.get(s,function(e){return e?console.log(e):result})},login:function(e){var t=this,n=Math.random().toString(36).slice(2);dpd.users.post({username:n,password:n,team:e},function(e,t){return t?console.log(t):void 0}),dpd.users.login({username:n,password:n},function(e,n){return n?console.log(n):void dpd.users.get(e.uid,function(e,n){t.user=e})}),dpd.hexes.get({owner:this.user.team,$limit:1},function(e){t.startHex=e[0]})},createConnection:function(e){var t=e.slice(1,e.length-1),n=_.first(e),o=_.last(e),s={startQ:n.q,startR:n.r,endQ:o.q,endR:o.r,route:t};dpd.connections.post(s,function(e,t){return t?console.log(t):void 0})},rebootNode:function(e,t){dpd.hexes.get({q:e,r:t},function(e,t){return t?console.log(t):void dpd.hexes.put(e.id,{whenAvailableForUse:Date.now()+5e3},function(e,t){return t?console.log(t):void 0})})}};