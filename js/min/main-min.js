function init(){document.getElementById("stage").oncontextmenu=function(){return!1};var e=[{src:"assets/tile_mask.png",id:"tile_mask"},{src:"assets/tile_empty.png",id:"tile_empty"},{src:"assets/tile_empty.json",id:"tile_empty_data"},{src:"assets/tile_blue.png",id:"tile_blue"},{src:"assets/tile_blue.json",id:"tile_blue_data"}];loader=new createjs.LoadQueue(!1),loader.addEventListener("complete",onLoad),loader.loadManifest(e)}function onLoad(){stage=new createjs.Stage("stage"),map=new createjs.Container,stage.addChild(map),stage.enableMouseOver(),w=stage.canvas.width,h=stage.canvas.height,stage.addEventListener("stagemousedown",onMouseDown),stage.addEventListener("stagemouseup",onMouseUp),stage.addEventListener("stagemousemove",onMouseMove),maskBounds=new createjs.Bitmap(loader.getResult("tile_mask")).getBounds();for(var e=0;12>e;++e)for(var t=0;15>t;++t){var n=new Tile(t,e);n.on("rollover",function(){this.children[0].gotoAndPlay("circle")}),n.on("rollout",function(){this.children[0].gotoAndPlay("tile_empty")}),n.on("click",function(e){console.log(e),0===e.nativeEvent.button&&console.log(this.q+", "+this.r)})}createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",onTick)}function onTick(e){stage.update(e)}function onMouseDown(e){2===e.nativeEvent.button&&(mouseIsDown=!0,dragOrigin={x:e.stageX-map.x,y:e.stageY-map.y})}function onMouseUp(e){mouseIsDown=!1}function onMouseMove(e){mouseIsDown&&(map.x=e.stageX-dragOrigin.x,map.y=e.stageY-dragOrigin.y)}function coordToPoint(e){return point={},point.x=e.q*maskBounds.width*3/4,point.y=e.r*maskBounds.height+e.q%2*maskBounds.height/2,point}var stage,w,h,loader,map,maskBounds,dragOrigin,mouseIsDown=!1;init();